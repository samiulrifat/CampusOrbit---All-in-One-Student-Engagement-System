{"ast":null,"code":"// import React, { useState, useEffect } from 'react';\n// import { useParams } from 'react-router-dom';\n// import axios from 'axios';\n// import RSVPButton from '../components/Events/RSVPButton';\n// import AttendeeList from '../components/Events/AttendeeList';\n// import { useAuth } from '../context/AuthProvider'; \n// import PhotoGallery from '../components/Events/PhotoGallery';\n// import PhotoUploadForm from '../components/Events/PhotoUploadForm'; // Ensure you import from context\n\n// import './EventPage.css';\n\n// const EventPage = () => {\n//   const { id: eventId } = useParams();\n//   const { user, loading: userLoading } = useAuth();\n//   const [event, setEvent] = useState(null);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(null);\n\n//   useEffect(() => {\n//     const token = localStorage.getItem('token');\n//     if (!token) {\n//       setError('You must be logged in to view event details.');\n//       setLoading(false);\n//       return;\n//     }\n\n//     axios.get(`/api/events/${eventId}`, {\n//       headers: { Authorization: `Bearer ${token}` }\n//     })\n//     .then(res => {\n//       setEvent(res.data);\n//       setLoading(false);\n//     })\n//     .catch(err => {\n//       console.error('Failed to load event:', err);\n//       setError('Failed to load event. Please try again.');\n//       setLoading(false);\n//     });\n//   }, [eventId]);\n\n//   if (loading || userLoading) return <p>Loading...</p>;\n//   if (error) return <p>{error}</p>;\n//   if (!user) return <p>Please log in to view event details.</p>;\n//   if (!event) return <p>No event found.</p>;\n\n//   const isOrganizer = ['organizer', 'club_admin', 'admin'].includes(user.role);\n\n//   console.log('Current user:', user);\n//   console.log('Is Organizer:', isOrganizer);\n//   console.log('Event attendees:', event?.attendees);\n\n//   // Update event photos state on successful photo upload\n//   const handleUploadSuccess = (newPhotos) => {\n//     setEvent(prev => ({ ...prev, photos: newPhotos }));\n//   };\n\n//   return (\n//     <div className=\"container mt-4\">\n//       <h1>{event.title}</h1>\n//       <p>{event.description}</p>\n//       <p>\n//         <strong>Date: </strong>\n//         {new Date(event.date).toLocaleString()}\n//       </p>\n\n//       <RSVPButton eventId={eventId} currentUser={user} />\n\n//       {isOrganizer && (\n//         <div className=\"mt-5\">\n//           <AttendeeList eventId={eventId} />\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n\n// export default EventPage;","map":{"version":3,"names":[],"sources":["C:/CampusOrbit---All-in-One-Student-Engagement-System/frontend/src/pages/EventPage.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\r\n// import { useParams } from 'react-router-dom';\r\n// import axios from 'axios';\r\n// import RSVPButton from '../components/Events/RSVPButton';\r\n// import AttendeeList from '../components/Events/AttendeeList';\r\n// import { useAuth } from '../context/AuthProvider'; \r\n// import PhotoGallery from '../components/Events/PhotoGallery';\r\n// import PhotoUploadForm from '../components/Events/PhotoUploadForm'; // Ensure you import from context\r\n\r\n// import './EventPage.css';\r\n\r\n// const EventPage = () => {\r\n//   const { id: eventId } = useParams();\r\n//   const { user, loading: userLoading } = useAuth();\r\n//   const [event, setEvent] = useState(null);\r\n//   const [loading, setLoading] = useState(true);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   useEffect(() => {\r\n//     const token = localStorage.getItem('token');\r\n//     if (!token) {\r\n//       setError('You must be logged in to view event details.');\r\n//       setLoading(false);\r\n//       return;\r\n//     }\r\n\r\n//     axios.get(`/api/events/${eventId}`, {\r\n//       headers: { Authorization: `Bearer ${token}` }\r\n//     })\r\n//     .then(res => {\r\n//       setEvent(res.data);\r\n//       setLoading(false);\r\n//     })\r\n//     .catch(err => {\r\n//       console.error('Failed to load event:', err);\r\n//       setError('Failed to load event. Please try again.');\r\n//       setLoading(false);\r\n//     });\r\n//   }, [eventId]);\r\n\r\n//   if (loading || userLoading) return <p>Loading...</p>;\r\n//   if (error) return <p>{error}</p>;\r\n//   if (!user) return <p>Please log in to view event details.</p>;\r\n//   if (!event) return <p>No event found.</p>;\r\n\r\n//   const isOrganizer = ['organizer', 'club_admin', 'admin'].includes(user.role);\r\n\r\n//   console.log('Current user:', user);\r\n//   console.log('Is Organizer:', isOrganizer);\r\n//   console.log('Event attendees:', event?.attendees);\r\n\r\n//   // Update event photos state on successful photo upload\r\n//   const handleUploadSuccess = (newPhotos) => {\r\n//     setEvent(prev => ({ ...prev, photos: newPhotos }));\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"container mt-4\">\r\n//       <h1>{event.title}</h1>\r\n//       <p>{event.description}</p>\r\n//       <p>\r\n//         <strong>Date: </strong>\r\n//         {new Date(event.date).toLocaleString()}\r\n//       </p>\r\n\r\n//       <RSVPButton eventId={eventId} currentUser={user} />\r\n\r\n//       {isOrganizer && (\r\n//         <div className=\"mt-5\">\r\n//           <AttendeeList eventId={eventId} />\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default EventPage;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}